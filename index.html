<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Huly‐Style Draggable Pin Demo</title>
  <!-- Tailwind CSS (JIT mode via CDN) -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- React + ReactDOM -->
  <script src="https://unpkg.com/react@18/umd/react.development.js" crossorigin></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js" crossorigin></script>

  <!-- Framer Motion (for animation + drag) -->
  <script src="https://unpkg.com/framer-motion/dist/framer-motion.umd.js" crossorigin></script>

  <!-- Babel (to compile JSX in‐browser) -->
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

  <style>
    body {
      margin: 0;
      padding: 2rem;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Ubuntu,
                   "Helvetica Neue", Arial, "Noto Sans", sans-serif, "Apple Color Emoji",
                   "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji";
      background-color: #f9fafb;
      color: #111827;
    }
  </style>
</head>
<body>
  <!-- React will mount here -->
  <div id="root"></div>

  <!-- ===== React + Framer Motion Code ===== -->
  <script type="text/babel">
    const { useState, useEffect, useRef } = React;
    const { motion } = window["framer-motion"];

    // ===================================================================
    // 1) FloatingPin Component
    //    • Flys in from (0,0, opacity: 0) to (x: 35, y: -25, opacity: 1)
    //    • Uses a spring transition like Huly.io
    //    • After it’s visible, it can be dragged anywhere
    // ===================================================================
    function FloatingPin({ parentRef, avatarSrc, size = 66 }) {
      // State to control when animation should start:
      const [shouldAnimate, setShouldAnimate] = useState(false);

      // When the component mounts, give a small delay to simulate
      // “isFirstAnimationFinished” from Huly. In reality they wait on the
      // “Your Fingertips” text animation (1.7s + .15s), but we’ll just wait 2s.
      useEffect(() => {
        const timer = setTimeout(() => setShouldAnimate(true), 2000);
        return () => clearTimeout(timer);
      }, []);

      return (
        <motion.span
          // The exact Tailwind classes Huly uses for positioning & styling:
          className={`
            absolute
            z-40
            flex flex-col items-center
            hover:cursor-grab
            active:cursor-grabbing
            group
            right-[-38px]
            top-[-38px]
            text-blue
            lg:-right-10 lg:-top-10
            md:-right-7 md:-top-8
            sm:right-[-22px]
          `}
          aria-hidden="true"
          draggable={false}
          style={{ userSelect: "none", touchAction: "none", transform: "translate(0px, 0px)" }}

          // FRAMER MOTION PROPS:
          //  • initial: start invisible & at (0,0)
          //  • animate: move to (35, -25) and fade in
          //  • We only trigger animate once shouldAnimate=true
          initial={{ x: 0, y: 0, opacity: 0 }}
          animate={shouldAnimate ? { x: 35, y: -25, opacity: 1 } : {}}
          transition={{
            type: "spring",
            stiffness: 80,
            damping: 12,
            opacity: { duration: 0.3, delay: 0.2 },
            x: { type: "spring", stiffness: 80, damping: 12, delay: 0.2 },
            y: { type: "spring", stiffness: 80, damping: 12, delay: 0.2 }
          }}

          // Enable dragging once it’s visible:
          drag={shouldAnimate}
          dragConstraints={parentRef}
          dragElastic={0.2}
        >
          {/* === Circular Avatar === */}
          <img
            alt="Pin Avatar"
            src={avatarSrc}
            width={size}
            height={size}
            className={`
              pointer-events-none
              z-10
              max-w-none
              rounded-full
              border-2 border-blue
              shadow-[0px_6px_25px_0px_#00000080]
              transition-all duration-200
              group-active:translate-y-[-15px]
              group-active:scale-[1.05]
              group-active:shadow-[0px_14px_30px_0px_#00000080]
              md:max-w-[45px]
              sm:max-w-[36px]
            `}
            style={{ color: "transparent" }}
            loading="lazy"
          />

          {/* === The “Stick” Beneath the Avatar === */}
          <span className="
            flex flex-col items-center
            transition-transform duration-200
            group-active:-translate-y-[25px]
          ">
            <span className="h-[46px] w-0.5 bg-blue md:h-[34px] md:w-px sm:h-[26px]"></span>
            <span className="-mt-px h-2.5 w-2.5 rounded-full bg-blue md:h-[7px] md:w-[7px]"></span>
          </span>
        </motion.span>
      );
    }

    // ===================================================================
    // 2) HeroHeader Component
    //    • Renders "Knowledge at Your Fingertips"
    //    • Positions <FloatingPin> exactly where Huly places it
    //    • Uses a ref as dragConstraints for the pin
    // ===================================================================
    function HeroHeader() {
      const containerRef = useRef(null);

      // Use Huly's exact "Your Fingertips" typewriter timings (not shown here),
      // but we'll simply render static text for brevity.
      // They start the pin animation once the text animation finishes (~1.85s).
      // We simulate that with a 2s delay inside FloatingPin.

      // Hardcode Huly's avatar URL, which matches their production asset:
      const avatarUrl =
        "https://huly.io/_next/static/media/blue-pin-image.bb230dcd.jpg";

      return (
        <div ref={containerRef} className="relative w-full max-w-xl mx-auto pt-20 pb-40">
          {/* Static Part: "Knowledge at" */}
          <h2
            className="
              relative
              mt-[-40px]
              max-w-xl
              pt-[40px]
              font-title
              text-[80px]
              font-semibold
              leading-none
              tracking-tighter
              text-black
              lg:text-[80px]
              md:mt-[-30px] md:pt-[30px] md:text-[54px]
              sm:text-[36px]
              2xs:max-w-[268px]
            "
          >
            {/* Huly uses an invisible span with intersection observer here; omitted for brevity */}
            Knowledge at<br/>
            <span className="relative inline-block">
              {/* Invisible placeholder so layout stays fixed */}
              <span className="invisible">Your Fingertips</span>
              {/* Absolutely positioned animated text + pin */}
              <span className="absolute left-0 top-7 lg:top-5 sm:top-2.5">
                {/* In the real Huly, “Your Fingertips” is typed out letter by letter.
                    Here, we’ll render it statically for simplicity: */}
                <span className="inline-block">
                  Your Fingertips
                </span>

                {/* The floating, draggable pin */}
                <FloatingPin
                  parentRef={containerRef}
                  avatarSrc={avatarUrl}
                  size={66}
                />
              </span>
            </span>
          </h2>

          {/* Huly’s marketing copy under the heading */}
          <p className="mt-10 lg:mt-9 md:mt-4 sm:mt-3 text-gray-700">
            Huly offers a wide range of features to create and manage your
            project documentation. Huly's suite of collaborative editing tools
            boosts team efficiency.
          </p>
        </div>
      );
    }

    // ===================================================================
    // 3) Render into #root
    // ===================================================================
    ReactDOM.createRoot(document.getElementById("root")).render(<HeroHeader />);
  </script>
</body>
</html>
