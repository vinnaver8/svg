<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <script src="https://cdn.tailwindcss.com"></script>
  <title>Scroll-Driven Card Transform</title>
  <style>
    /* Base state: off to the left */
    .slide-card {
      position: sticky;
      top: 50vh;                  /* pin at halfway down the viewport */
      transform: translate(-100%, -50%);
      transition: transform 0.1s linear;
      will-change: transform;
    }
  </style>
</head>
<body class="bg-gray-50 min-h-[300vh]">

  <!-- Spacer to allow scrolling-in -->
  <div class="h-screen"></div>

  <!-- Container for card #1 -->
  <div id="c1" class="h-screen flex items-center justify-center">
    <div class="slide-card max-w-sm bg-white rounded-xl shadow-xl p-6">
      <h3 class="text-xl font-semibold mb-2">Card One</h3>
      <p class="text-gray-600">This card will slide in from left, sit centered, then slide out to right.</p>
    </div>
  </div>

  <!-- Spacer -->
  <div class="h-screen"></div>

  <!-- Container for card #2 -->
  <div id="c2" class="h-screen flex items-center justify-center">
    <div class="slide-card max-w-sm bg-white rounded-xl shadow-xl p-6">
      <h3 class="text-xl font-semibold mb-2">Card Two</h3>
      <p class="text-gray-600">Same effect here – independent timing, same code.</p>
    </div>
  </div>

  <!-- Final spacer -->
  <div class="h-screen"></div>

  <script>
    function updateSlides() {
      document.querySelectorAll('.slide-card').forEach(card => {
        const container = card.parentElement;
        const rect = container.getBoundingClientRect();
        const vh = window.innerHeight;

        // when container top enters the bottom of viewport, start movement (progress 0)
        // when container bottom reaches top of viewport, movement is complete (progress 1)
        const start = vh;
        const end = -rect.height;
        const raw = (start - rect.top) / (start - end);
        const progress = Math.min(Math.max(raw, 0), 1);

        // map progress [0→1] to translateX from -100% → +100%
        const x = (progress * 200) - 100;

        card.style.transform = `translate(${x}%, -50%)`;
      });
    }

    window.addEventListener('scroll', updateSlides);
    window.addEventListener('resize', updateSlides);
    window.addEventListener('load', updateSlides);
  </script>

</body>
</html>
